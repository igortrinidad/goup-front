webpackJsonp([46],{1058:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e(9),o=e.n(s),i=e(19),r=e(90),n=e.n(r),c=e(10),l=e.n(c),d=e(61);t.default={name:"auth-login",components:{mainLoader:n.a,mainHeader:l.a},data:function(){return{email:"",password:"",rememberMe:!1}},computed:o()({},e.i(i.b)(["currentUser"])),mounted:function(){"true"==this.$route.query.new&&this.$swal("Bem-vindo ao iSaudavel","Seu cadastro foi realizado com sucesso, os dados para acesso foram enviados para o seu e-mail.","success"),this.checkLastEmailLogin(),window.cordova&&openFB.init({appId:d.c,tokenStore:localStorage})},methods:o()({},e.i(i.a)(["authSetToken","authSetUser","setLoading"]),{setLastEmailLogin:function(a){localStorage.setItem("last_email",a)},checkLastEmailLogin:function(){var a=localStorage.getItem("last_email");a&&(this.email=localStorage.getItem("last_email",a))},login:function(){var a=this;a.setLastEmailLogin(a.email),a.$validator.validateAll().then(function(){a.$http.post("/auth/login",{email:a.email,password:a.password}).then(function(t){if(t.data.user_not_found)return warningNotify("","Não localizamos seu usuário, verifique seus dados."),!1;a.authSetToken(t.data.access_token),a.authSetUser(t.data.user),a.setLoading({is_loading:!1,message:""}),successNotify("","Login efetuado com sucesso."),a.$router.push(a.handleRedirect())}).catch(function(t){errorNotify("Ops!","Erro ao efetuar login."),a.setLoading({is_loading:!1,message:""})})}).catch(function(){})},facebookLogin:function(){var a=this;a.setLoading({is_loading:!0,message:""}),window.cordova&&openFB.login(function(t){"connected"===t.status?a.statusChangeCallback(t):(a.setLoading({is_loading:!1,message:""}),alert("Facebook login failed: "+t.error),localStorage.clear(),window.cordova&&window.cookies.clear())},{scope:"public_profile,email,publish_actions"}),window.cordova||FB.login(function(t){a.statusChangeCallback(t)},{scope:"public_profile,email,publish_actions"})},statusChangeCallback:function(a){var t=this;"connected"===a.status?t.getUserInfo(a.authResponse.accessToken):errorNotify("","É necessário fazer login para continuar."),t.setLoading({is_loading:!1,message:""})},getUserInfo:function(a){var t=this;window.cordova&&openFB.api({path:"/v2.8/me",params:{access_token:a,fields:"id,name,first_name,last_name,email"},success:function(e){e.photo_url="https://graph.facebook.com/"+e.id+"/picture?type=normal",e.access_token=a,e.role="professional",t.socialLogin(e)},error:t.errorHandler}),window.cordova||FB.api("/me",{fields:"name,first_name, last_name, email"},function(e){e.photo_url="https://graph.facebook.com/"+e.id+"/picture?type=normal",e.access_token=a,e.role="professional",t.socialLogin(e)})},socialLogin:function(a){var t=this;localStorage.setItem("provider","facebook"),t.$http.post("/auth/social",a).then(function(a){t.authSetToken(a.data.access_token),t.authSetUser(a.data.user),t.setLoading({is_loading:!1,message:""}),successNotify("","Login efetuado com sucesso."),t.$router.push(t.handleRedirect())}).catch(function(a){errorNotify("Ops!","Erro ao efetuar login."),t.setLoading({is_loading:!1,message:""}),localStorage.clear(),window.cordova&&window.cookies.clear()})},handleRedirect:function(){var a=this,t=!!a.currentUser.companies.length;return(a.$route.query.redirect_back?a.$route.query.redirect_back:a.$route.query.redirect)||(t?"/dashboard/empresas/":"/profissional/dashboard")},errorHandler:function(a){that.setLoading({is_loading:!1,message:""}),errorNotify("",a.message),localStorage.clear(),window.cordova&&window.cookies.clear()}})}},1213:function(a,t,e){t=a.exports=e(859)(),t.push([a.i,"","",{version:3,sources:[],names:[],mappings:"",file:"login.vue",sourceRoot:""}])},1311:function(a,t,e){var s=e(1213);"string"==typeof s&&(s=[[a.i,s,""]]),s.locals&&(a.exports=s.locals);e(860)("09d7aafc",s,!0)},1498:function(a,t,e){a.exports={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"first-container"},[e("main-loader"),a._v(" "),e("main-header",{attrs:{type:"center",title:"Login Profissional",cursor:!1,action:function(){return!1},hasback:!0}}),a._v(" "),e("section",[e("form",{staticClass:"container",attrs:{id:"loginform",action:"index.html"}},[e("div",{staticClass:"container-form"},[e("div",{staticClass:"row"},[a._m(0),a._v(" "),e("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 m-t-30 text-center"},[e("button",{staticClass:"btn btn-facebook btn-block",on:{click:function(t){t.preventDefault(),a.facebookLogin()}}},[e("i",{staticClass:"fa fa-facebook m-r-10 button-icon"}),a._v(" Entrar com o Facebook\n                        ")])]),a._v(" "),a._m(1)])])])]),a._v(" "),e("section",{staticClass:"form"},[e("div",{staticClass:"container-form"},[e("form",{staticClass:"m-t-10",on:{submit:a.login}},[e("div",{class:{"form-group":!0,"has-error":a.errors.has("email")}},[e("label",{staticClass:"control-label"},[a._v("E-mail")]),a._v(" "),e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:a.email,expression:"email"}],staticClass:"form-control",attrs:{id:"id-login-email",type:"email","data-vv-name":"email","data-vv-as":"e-mail",placeholder:"email"},domProps:{value:a.email},on:{input:function(t){t.target.composing||(a.email=t.target.value)}}}),a._v(" "),e("small",{staticClass:"f-300",staticStyle:{color:"#fff"}},[a._v(a._s(a.errors.first("email")))])]),a._v(" "),e("div",{class:{"form-group":!0,"has-error":a.errors.has("password")}},[e("label",{staticClass:"control-label"},[a._v("\n                        Senha\n                    ")]),a._v(" "),e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:a.password,expression:"password"}],staticClass:"form-control",attrs:{id:"id-login-password",type:"password","data-vv-name":"password","data-vv-as":"senha",placeholder:"senha"},domProps:{value:a.password},on:{input:function(t){t.target.composing||(a.password=t.target.value)}}}),a._v(" "),e("small",{staticClass:"f-300",staticStyle:{color:"#fff"}},[a._v(a._s(a.errors.first("password")))]),a._v(" "),e("div",{staticClass:"text-right"},[e("router-link",{staticClass:"btn btn-primary-inverse btn-xs f-300 m-t-20",attrs:{to:{name:"landing.reset-pass",params:{usertype:"professional"}}}},[a._v("Esqueceu a senha ?")])],1)]),a._v(" "),e("div",{staticClass:"form-group text-left"},[e("button",{staticClass:"btn btn-light btn-block m-b-10",attrs:{disabled:!a.email||!a.password},on:{click:function(t){t.preventDefault(),a.login(t)}}},[a._v("Acessar")])])])])]),a._v(" "),e("div",{staticClass:"container text-center"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12 text-center f-18"},[e("div",{staticClass:"card m-b-0"},[e("div",{staticClass:"card-body card-padding"},[e("span",{staticClass:"f-300"},[a._v("Não possui cadastro? "),e("router-link",{attrs:{to:"/cadastro"}},[a._v("Cadastre-se aqui!")])],1)])])])]),a._v(" "),e("div",{staticClass:"container-form"},[a._m(2),a._v(" "),e("div",{staticClass:"text-center"},[e("button",{staticClass:"btn btn-facebook btn-block",on:{click:function(t){t.preventDefault(),a.facebookLogin()}}},[e("i",{staticClass:"fa fa-facebook m-r-10 button-icon"}),a._v(" Cadastre-se com o Facebook\n                ")])])]),a._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12 m-t-20 text-center"},[e("div",{staticClass:"card"},[a._m(3),a._v(" "),e("div",{staticClass:"card-body card-padding"},[a._m(4),a._v(" "),e("router-link",{staticClass:"btn btn-primary p-5 p-l-10 p-r-10 f-300 m-t-15",attrs:{tag:"button",to:"/cliente/login"}},[a._v("Acessar como Usuário")])],1)])])])])],1)},staticRenderFns:[function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"col-sm-12 text-center"},[s("h3",{staticStyle:{"max-width":"200px",margin:"0 auto"}},[s("img",{staticClass:"d-block m-t--10",attrs:{src:e(89),width:"100%"}})]),a._v(" "),s("div",{staticClass:"card m-b-0"},[s("div",{staticClass:"card-body card-padding"},[s("p",{staticClass:"f-300 m-0"},[a._v("Faça o login como Profissional para gerenciar empresas, agenda, perfil profissional ou dashboard de seus clientes.")])])])])},function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 m-t-10 text-center"},[e("span",{staticClass:"or-border"}),a._v(" "),e("span",{staticClass:"or-text"},[a._v("Ou")])])},function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 m-t-10 m-b-10 text-center"},[e("span",{staticClass:"or-border"}),a._v(" "),e("span",{staticClass:"or-text"},[a._v("Ou")])])},function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"card-header ch-alt p-10"},[e("h3",{staticClass:"f-300 m-0"},[a._v("É cliente ?")])])},function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("span",{staticClass:"f-300 d-block"},[a._v("Se você deseja conhecer empresas de saúde e controlar sua saúde através do iSaudavel, acesse como "),e("b",[a._v("Usuário")]),a._v(".")])}]}},407:function(a,t,e){e(1311);var s=e(2)(e(1058),e(1498),"data-v-b18a6118",null);a.exports=s.exports}});
//# sourceMappingURL=46.4c95f50ef98616ad19b4.js.map