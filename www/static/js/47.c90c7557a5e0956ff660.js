webpackJsonp([47],{1e3:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e(10),o=e.n(s),i=e(19),n=e(91),r=e.n(n),c=e(11),l=e.n(c),d=e(60);t.default={name:"client-auth-login",components:{mainLoader:r.a,mainHeader:l.a},data:function(){return{email:"",password:""}},mounted:function(){"true"==this.$route.query.new&&this.$swal("Bem-vindo ao iSaudavel","Seu cadastro foi realizado com sucesso, os dados para acesso foram enviados para o seu e-mail.","success"),this.checkLastEmailLogin(),window.cordova&&openFB.init({appId:d.c,tokenStore:localStorage})},methods:o()({},e.i(i.a)(["authSetToken","authSetUser","setLoading","setClientCompanies"]),{setLastEmailLogin:function(a){localStorage.setItem("last_email",a)},checkLastEmailLogin:function(){var a=localStorage.getItem("last_email");a&&(this.email=localStorage.getItem("last_email",a))},login:function(){var a=this;a.setLastEmailLogin(a.email),this.$validator.validateAll().then(function(){a.$http.post("/client/auth/login",{email:a.email,password:a.password}).then(function(t){if(t.data.user_not_found)return warningNotify("","Não localizamos seu usuário, verifique seus dados."),!1;a.authSetToken(t.data.access_token),a.authSetUser(t.data.user),a.getClientCompanies(),a.setLoading({is_loading:!1,message:""}),successNotify("","Login efetuado com sucesso."),a.$router.push(a.handleRedirect(t.data.user.id))}).catch(function(t){errorNotify("Ops!","Erro ao efetuar login."),a.setLoading({is_loading:!1,message:""}),localStorage.clear(),window.cordova&&window.cookies.clear()})}).catch(function(){})},facebookLogin:function(){var a=this;a.setLoading({is_loading:!0,message:""}),window.cordova&&openFB.login(function(t){"connected"===t.status?a.statusChangeCallback(t):(a.setLoading({is_loading:!1,message:""}),alert("Facebook login failed: "+t.error),localStorage.clear(),window.cordova&&window.cookies.clear())},{scope:"public_profile,email,publish_actions"}),window.cordova||FB.login(function(t){a.statusChangeCallback(t)},{scope:"public_profile,email,publish_actions"})},statusChangeCallback:function(a){var t=this;"connected"===a.status?t.getUserInfo(a.authResponse.accessToken):(errorNotify("","É necessário fazer login para continuar."),t.setLoading({is_loading:!1,message:""}))},getUserInfo:function(a){var t=this;window.cordova&&openFB.api({path:"/v2.8/me",params:{access_token:a,fields:"id,name,first_name,last_name,email"},success:function(e){e.photo_url="https://graph.facebook.com/"+e.id+"/picture?type=normal",e.access_token=a,e.role="client",t.socialLogin(e)},error:t.errorHandler}),window.cordova||FB.api("/me",{fields:"name,first_name, last_name, email"},function(e){e.photo_url="https://graph.facebook.com/"+e.id+"/picture?type=normal",e.access_token=a,e.role="client",t.socialLogin(e)})},socialLogin:function(a){var t=this;localStorage.setItem("provider","facebook"),t.setLoading({is_loading:!0,message:""}),t.$http.post("/auth/social",a).then(function(a){t.authSetToken(a.data.access_token),t.authSetUser(a.data.user),t.getClientCompanies(),t.setLoading({is_loading:!1,message:""}),successNotify("","Login efetuado com sucesso."),t.$router.push(t.handleRedirect(a.data.user.id))}).catch(function(a){errorNotify("Ops!","Erro ao efetuar login."),t.setLoading({is_loading:!1,message:""}),localStorage.clear(),window.cordova&&window.cookies.clear()})},handleRedirect:function(a){var t=this;return(t.$route.query.redirect_back?t.$route.query.redirect_back:t.$route.query.redirect)||{name:"client.dashboard",params:{client_id:a}}},errorHandler:function(a){that.setLoading({is_loading:!1,message:""}),errorNotify("",a.message),localStorage.clear(),window.cordova&&window.cookies.clear()},getClientCompanies:function(){var a=this;a.$http.get("client/company/full_list").then(function(t){a.setClientCompanies(t.data.companies)}).catch(function(a){console.log(a)})}})}},1145:function(a,t,e){t=a.exports=e(866)(),t.push([a.i,"","",{version:3,sources:[],names:[],mappings:"",file:"login.vue",sourceRoot:""}])},1243:function(a,t,e){var s=e(1145);"string"==typeof s&&(s=[[a.i,s,""]]),s.locals&&(a.exports=s.locals);e(867)("5b5ea9eb",s,!0)},1418:function(a,t,e){a.exports={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"first-container"},[e("main-loader"),a._v(" "),e("main-header",{attrs:{type:"center",title:"Login Usuário",cursor:!1,action:function(){return!1},hasback:!0}}),a._v(" "),e("section",[e("div",{staticClass:"container"},[e("form",{staticClass:"container-form",attrs:{id:"loginform",action:"index.html"}},[e("div",{staticClass:"row"},[a._m(0),a._v(" "),e("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 m-t-30 text-center"},[e("button",{staticClass:"btn btn-facebook btn-block",on:{click:function(t){t.preventDefault(),a.facebookLogin()}}},[e("i",{staticClass:"fa fa-facebook m-r-10 button-icon"}),a._v(" Entrar com o Facebook\n                        ")])]),a._v(" "),a._m(1)])])])]),a._v(" "),e("section",{staticClass:"form"},[e("div",{staticClass:"container-form"},[e("form",{staticClass:"m-t-10",on:{submit:a.login}},[e("div",{class:{"form-group":!0,"has-error":a.errors.has("email")}},[e("label",{staticClass:"control-label"},[a._v("E-mail")]),a._v(" "),e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:a.email,expression:"email"}],staticClass:"form-control",attrs:{id:"id-login-email",type:"email",placeholder:"email","data-vv-name":"email","data-vv-as":"e-mail"},domProps:{value:a.email},on:{input:function(t){t.target.composing||(a.email=t.target.value)}}}),a._v(" "),e("small",{staticClass:"f-300",staticStyle:{color:"#fff"}},[a._v(a._s(a.errors.first("email")))])]),a._v(" "),e("div",{class:{"form-group":!0,"has-error":a.errors.has("password")}},[e("label",{staticClass:"control-label"},[a._v("\n                        Senha\n                    ")]),a._v(" "),e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:a.password,expression:"password"}],staticClass:"form-control",attrs:{id:"id-login-password",type:"password","data-vv-name":"password","data-vv-as":"senha",placeholder:"senha"},domProps:{value:a.password},on:{input:function(t){t.target.composing||(a.password=t.target.value)}}}),a._v(" "),e("small",{staticClass:"f-300",staticStyle:{color:"#fff"}},[a._v(a._s(a.errors.first("password")))]),a._v(" "),e("div",{staticClass:"text-right"},[e("router-link",{staticClass:"btn btn-primary-inverse btn-xs f-300 m-t-20",attrs:{to:{name:"landing.reset-pass",params:{usertype:"client"}}}},[a._v("Esqueceu a senha ?")])],1)]),a._v(" "),e("div",{staticClass:"form-group text-left m-t-20"},[e("button",{staticClass:"btn btn-light btn-block m-b-10",attrs:{disabled:!a.email||!a.password},on:{click:function(t){t.preventDefault(),a.login(t)}}},[a._v("Acessar")])])])])]),a._v(" "),e("div",{staticClass:"container text-center"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12 text-center f-18"},[e("div",{staticClass:"card m-b-0"},[e("div",{staticClass:"card-body card-padding"},[e("span",{staticClass:"f-300"},[a._v("Não possui cadastro? "),e("router-link",{attrs:{to:"/cliente/cadastro"}},[a._v("Cadastre-se aqui!")])],1)])])])]),a._v(" "),e("div",{staticClass:"container-form"},[a._m(2),a._v(" "),e("div",{staticClass:"text-center"},[e("button",{staticClass:"btn btn-facebook btn-block",on:{click:function(t){t.preventDefault(),a.facebookLogin()}}},[e("i",{staticClass:"fa fa-facebook m-r-10 button-icon"}),a._v(" Cadastre-se com o Facebook\n                ")])])]),a._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12 m-t-20 text-center"},[e("div",{staticClass:"card"},[a._m(3),a._v(" "),e("div",{staticClass:"card-body card-padding"},[e("span",{staticClass:"f-300 d-block"},[a._v("Se você é profissional da saúde acesse a área do profissional.")]),a._v(" "),e("router-link",{staticClass:"btn btn-primary p-5 p-l-10 p-r-10 f-300 m-t-15",attrs:{tag:"button",to:"/login"}},[a._v("Acessar como Profissional")])],1)])])])])],1)},staticRenderFns:[function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"col-sm-12 text-center"},[s("h3",{staticStyle:{"max-width":"200px",margin:"0 auto"}},[s("img",{staticClass:"d-block m-t--10",attrs:{src:e(90),width:"100%"}})]),a._v(" "),s("div",{staticClass:"card m-b-0"},[s("div",{staticClass:"card-body card-padding"},[s("p",{staticClass:"f-300 m-b-0"},[a._v("Faça o login como usuário para gerenciar o dashboard de sua saúde.")])])])])},function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 m-t-10 text-center"},[e("span",{staticClass:"or-border"}),a._v(" "),e("span",{staticClass:"or-text"},[a._v("Ou")])])},function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"col-xs-12 col-sm-12 col-md-12 m-t-10 m-b-10 text-center"},[e("span",{staticClass:"or-border"}),a._v(" "),e("span",{staticClass:"or-text"},[a._v("Ou")])])},function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"card-header ch-alt p-10"},[e("h3",{staticClass:"f-300 m-0"},[a._v("É profissional ?")])])}]}},379:function(a,t,e){e(1243);var s=e(2)(e(1e3),e(1418),"data-v-115136c5",null);a.exports=s.exports}});
//# sourceMappingURL=47.c90c7557a5e0956ff660.js.map